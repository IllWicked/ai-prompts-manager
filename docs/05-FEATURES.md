# –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

[‚Üê –ù–∞–∑–∞–¥ –∫ INDEX](INDEX.md)

## Language Detection System

–î–µ—Ç–µ–∫—Ü–∏—è –∏ –∑–∞–º–µ–Ω–∞ —è–∑—ã–∫–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∫–ª–æ–Ω–µ–Ω–∏–µ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–≥–µ–æ.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ** –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ —Ñ–æ—Ä–º—ã:

```javascript
en: {
    lang: '–∞–Ω–≥–ª–∏–π—Å–∫–∏–π',      // —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (24 —Ñ–æ—Ä–º—ã)
    native: '–∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–π',  // —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (24 —Ñ–æ—Ä–º—ã)
    country: '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è', // –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã (–±–µ–∑ —Å–∫–ª–æ–Ω–µ–Ω–∏—è)
    locale: 'en-GB',         // –∫–æ–¥ –ª–æ–∫–∞–ª–∏ (BCP 47)
}
```

### –§—É–Ω–∫—Ü–∏–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `generateAdjectiveForms(word)` | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ 24 —Ñ–æ—Ä–º—ã (6 –ø–∞–¥–µ–∂–µ–π √ó 4 —Ä–æ–¥–∞) |
| `getAllWordForms(word)` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ |
| `detectWordForm(word, base)` | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞–¥–µ–∂ –∏ —Ä–æ–¥ —Å–ª–æ–≤–∞ |
| `transformWord(word, fromBase, toBase)` | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–∞–¥–µ–∂–∞ |

### –§—É–Ω–∫—Ü–∏–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `detectLanguageInText(text)` | –ù–∞—Ö–æ–¥–∏—Ç —è–∑—ã–∫ –ø–æ –ª—é–±–æ–π —Ñ–æ—Ä–º–µ —Å–ª–æ–≤–∞ |
| `detectAllLanguagesInText(text)` | –í—Å–µ —è–∑—ã–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ |
| `detectLanguageFromText()` | –ò–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –±–ª–æ–∫–æ–≤ |
| `detectAndUpdateLanguageFromTab()` | –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ |

### –ó–∞–º–µ–Ω–∞ —è–∑—ã–∫–æ–≤

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `getActiveLanguageData()` | –î–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∞ —Å —É—á—ë—Ç–æ–º —Å—Ç—Ä–∞–Ω—ã |
| `insertLanguageFormAtCursor(textarea)` | –í—Å—Ç–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã (–¥–ª—è –º–æ–¥–∞–ª–∫–∏) |
| `showLanguageFormMenu(textarea, anchorBtn)` | –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é —Ñ–æ—Ä–º —Å –ø–æ–¥–º–µ–Ω—é –ø–∞–¥–µ–∂–µ–π |

### –ú–µ–Ω—é –≤—Å—Ç–∞–≤–∫–∏ —Ñ–æ—Ä–º

–ö–Ω–æ–ø–∫–∞ "–Ø–∑—ã–∫" –≤ —Ç—É–ª–±–∞—Ä–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π       —è–∑—ã–∫ ‚ñ∂  ‚îÇ ‚îÄ‚îÄ‚îê
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ —Ñ—Ä–∞–Ω–∫–æ—è–∑—ã—á–Ω—ã–π  –Ω–æ—Å–∏—Ç–µ–ª—å ‚ñ∂ ‚îÇ   ‚îî‚îÄ‚ñ∂ ‚îÇ –ú–£–ñ–°–ö–û–ô –†–û–î                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îÇ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π   –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π  ‚îÇ
‚îÇ –ö–∞–Ω–∞–¥–∞            —Å—Ç—Ä–∞–Ω–∞  ‚îÇ       ‚îÇ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–≥–æ   —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π  ‚îÇ
‚îÇ fr-CA               –∫–æ–¥   ‚îÇ       ‚îÇ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–º—É    –¥–∞—Ç–µ–ª—å–Ω—ã–π   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ ...                         ‚îÇ
                                    ‚îÇ –ñ–ï–ù–°–ö–ò–ô –†–û–î                 ‚îÇ
                                    ‚îÇ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è   –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π  ‚îÇ
                                    ‚îÇ ...                         ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏:**
- –¢—É–ª–±–∞—Ä —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –±–ª–æ–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ)
- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–∞ (–ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º –∫–ª–∏–∫–µ –Ω–∞ –±–ª–æ–∫ –≤ workflow)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é:**
- `lang` ‚Äî –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ —è–∑—ã–∫–∞ —Å –ø–æ–¥–º–µ–Ω—é –ø–∞–¥–µ–∂–µ–π (24 —Ñ–æ—Ä–º—ã)
- `native` ‚Äî "–Ω–æ—Å–∏—Ç–µ–ª—å —è–∑—ã–∫–∞" —Å –ø–æ–¥–º–µ–Ω—é –ø–∞–¥–µ–∂–µ–π (24 —Ñ–æ—Ä–º—ã)
- `country` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã (–ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∫–∞)
- `locale` ‚Äî –∫–æ–¥ –ª–æ–∫–∞–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `fr-CA` (–ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∫–∞)

### –ü—Ä–∏–º–µ—Ä –∑–∞–º–µ–Ω—ã

–ü—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ `changeLanguage()` –≤—Å–µ —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö –±–ª–æ–∫–∞—Ö:

```
// –î–æ: —è–∑—ã–∫ = en
'–¥–ª—è –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ'

// –ü–æ—Å–ª–µ changeLanguage('de'):
'–¥–ª—è –Ω–µ–º–µ—Ü–∫–æ—è–∑—ã—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –≤ –Ω–µ–º–µ—Ü–∫–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ'

// –†–µ–≥–∏—Å—Ç—Ä –ø–µ—Ä–≤–æ–π –±—É–∫–≤—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
'–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏' ‚Üí '–ù–µ–º–µ—Ü–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏'

// –ö–æ–¥ –ª–æ–∫–∞–ª–∏ —Ç–æ–∂–µ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è:
'–õ–æ–∫–∞–ª—å: en-GB' ‚Üí '–õ–æ–∫–∞–ª—å: de-DE'
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

20 —è–∑—ã–∫–æ–≤ –≤ `languages.js`, –∏–∑ –Ω–∏—Ö 5 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–≥–µ–æ (–≤—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã):

| –ö–æ–¥ | –Ø–∑—ã–∫ | –ú—É–ª—å—Ç–∏–≥–µ–æ |
|-----|------|-----------|
| en | –∞–Ω–≥–ª–∏–π—Å–∫–∏–π | üåç 6 —Å—Ç—Ä–∞–Ω (US, GB, CA, AU, NZ, IE) |
| de | –Ω–µ–º–µ—Ü–∫–∏–π | üåç 4 —Å—Ç—Ä–∞–Ω—ã (DE, AT, CH, BE) |
| fr | —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π | üåç 4 —Å—Ç—Ä–∞–Ω—ã (FR, CA, CH, BE) |
| nl | –≥–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π | üåç 2 —Å—Ç—Ä–∞–Ω—ã (NL, BE) |
| pt | –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π | üåç 2 —Å—Ç—Ä–∞–Ω—ã (PT, BR) |
| es | –∏—Å–ø–∞–Ω—Å–∫–∏–π | ‚Äî |
| it | –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–π | ‚Äî |
| pl | –ø–æ–ª—å—Å–∫–∏–π | ‚Äî |
| cz | —á–µ—à—Å–∫–∏–π | ‚Äî |
| dk | –¥–∞—Ç—Å–∫–∏–π | ‚Äî |
| gr | –≥—Ä–µ—á–µ—Å–∫–∏–π | ‚Äî |
| no | –Ω–æ—Ä–≤–µ–∂—Å–∫–∏–π | ‚Äî |
| hu | –≤–µ–Ω–≥–µ—Ä—Å–∫–∏–π | ‚Äî |
| fi | —Ñ–∏–Ω—Å–∫–∏–π | ‚Äî |
| sk | —Å–ª–æ–≤–∞—Ü–∫–∏–π | ‚Äî |
| sl | —Å–ª–æ–≤–µ–Ω—Å–∫–∏–π | ‚Äî |
| hr | —Ö–æ—Ä–≤–∞—Ç—Å–∫–∏–π | ‚Äî |
| se | —à–≤–µ–¥—Å–∫–∏–π | ‚Äî |
| bg | –±–æ–ª–≥–∞—Ä—Å–∫–∏–π | ‚Äî |
| ro | —Ä—É–º—ã–Ω—Å–∫–∏–π | ‚Äî |

### –ú—É–ª—å—Ç–∏–≥–µ–æ —Å–∏—Å—Ç–µ–º–∞

–î–ª—è —è–∑—ã–∫–æ–≤ en, de, fr, nl, pt –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã.

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç—Ä–∞–Ω—ã –º–µ–Ω—è—é—Ç—Å—è –ø–æ–ª—è `country` (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã) –∏ `locale` (–∫–æ–¥ –ª–æ–∫–∞–ª–∏).

```javascript
// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
hasCountrySelection('en');  // true
getCountriesForLanguage('en');  
// ‚Üí [{code: 'us', name: '–°–®–ê', locale: 'en-US'}, ...]
getLanguageWithCountry('en', 'us');  
// ‚Üí { lang: '–∞–Ω–≥–ª–∏–π—Å–∫–∏–π', native: '–∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–π', country: '–°–®–ê', 
//     locale: 'en-US', ... }
```

---

## Theme Management

### –§—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `setTheme(theme)` | 'light', 'dark', 'system' |
| `applyTheme(theme)` | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ DOM |
| `syncWindowBackground()` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Tauri |
| `initThemeListener()` | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

–ü—Ä–∏ `system` ‚Äî –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `matchMedia('(prefers-color-scheme: dark)')`.

---

## File Attachments System

### –§—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `attachFilesToBlock(blockId)` | –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ |
| `removeAttachmentFromBlock(blockId, fileIndex)` | –£–¥–∞–ª–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ |
| `clearBlockAttachments(blockId)` | –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ |
| `updateBlockAttachmentsUI(blockId)` | –û–±–Ω–æ–≤–∏—Ç—å UI |
| `toggleAttachmentsPanel(blockId, show)` | –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å |
| `hasBlockAttachmentsPanel(blockId)` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ |

### –•—Ä–∞–Ω–µ–Ω–∏–µ

- **Runtime:** `blockAttachments[blockId]` ‚Äî `{name, type, path, data}`
- **–û—Ç–ø—Ä–∞–≤–∫–∞:** —á–µ—Ä–µ–∑ `attachFilesToMessage()`

---

## Dynamic Input System

### Input Constructor

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `showInputConstructorModal(blockNumber)` | –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä |
| `hideInputConstructorModal()` | –ó–∞–∫—Ä—ã—Ç—å |
| `addConstructorFieldElement(fieldData, index)` | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ |
| `saveConstructorFields()` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å |

### Dynamic Input Modal

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `showDynamicInputModal(blockNumber)` | –ú–æ–¥–∞–ª–∫–∞ –≤–≤–æ–¥–∞ |
| `hideDynamicInputModal()` | –°–∫—Ä—ã—Ç—å |
| `applyDynamicInput()` | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

–ü—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –ø–æ–ª—è —Å `optional: true`:
1. –¢–µ–∫—Å—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ø—Ä–æ–º–ø—Ç–∞
2. –ü–æ–∑–∏—Ü–∏—è ‚Üí `savedPosition`
3. –ü—Ä–∏ –ø–æ–∫–∞–∑–µ ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ instruction.fields

```javascript
{
  instruction: {
    type: "input",
    icon: "edit",
    text: "–ó–∞–º–µ–Ω–∏—Ç—å –∫–ª—é—á",
    fields: [
      {
        label: "–ö–ª—é—á",
        placeholder: "example",
        prefix: "–ø–æ –∫–ª—é—á—É",
        optional: false,
        savedPosition: 123
      }
    ]
  }
}
```

---

## Workflow Clipboard

### –§—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `copyBlocksToClipboard(blockIds)` | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–≤—è–∑–µ–π) |
| `renameBlockInline(blockId)` | Inline-–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ |
| `copyTextToClipboard(text)` | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –±—É—Ñ–µ—Ä |
| `pasteTextFromClipboard(textarea)` | –í—Å—Ç–∞–≤–∫–∞ –∏–∑ –±—É—Ñ–µ—Ä–∞ |

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–µ–π

1. –°–≤—è–∑–∏ ‚Üí `window.clipboardConnections`
2. –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
3. ID –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è, —Ç–æ–ø–æ–ª–æ–≥–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

## Auto-positioning

```javascript
autoPositionNodes(promptsData)
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏:
- –ò–º–ø–æ—Ä—Ç–µ –±–µ–∑ –ø–æ–∑–∏—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–∏ –±–ª–æ–∫–æ–≤
- –°–±—Ä–æ—Å–µ layout

---

## Tauri Events

–°–æ–±—ã—Ç–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫:

| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `download-started` | –ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ (toast) |
| `download-finished` | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ (toast + archive log) |
| `download-failed` | –û—à–∏–±–∫–∞ (toast) |

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
function setupDownloadListeners()
```

---

## Archive Log

–õ–æ–≥ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `ArchiveLogEntry`:**
```javascript
{
    tab: string,          // –ù–æ–º–µ—Ä Claude —Ç–∞–±–∞ (1-3)
    filename: string,     // –ò–º—è —Ñ–∞–π–ª–∞ –∞—Ä—Ö–∏–≤–∞
    claudeUrl: string,    // URL –≤ Claude
    filePath: string,     // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    timestamp: string     // ISO –¥–∞—Ç–∞
}
```

### Rust –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `add_archive_log_entry(tab, filename, claudeUrl)` | –î–æ–±–∞–≤–∏—Ç—å |
| `get_archive_log()` | –ü–æ–ª—É—á–∏—Ç—å |
| `clear_archive_log()` | –û—á–∏—Å—Ç–∏—Ç—å |

### UI

- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –≤ Claude"

---

## Downloads Log

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `DownloadEntry`:**
```javascript
{
    filename: string,     // –ò–º—è —Ñ–∞–π–ª–∞
    file_path: string,    // –ü–æ–ª–Ω—ã–π –ø—É—Ç—å
    timestamp: string     // ISO –¥–∞—Ç–∞
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –õ–∏–º–∏—Ç 500 –∑–∞–ø–∏—Å–µ–π
- Auto-cleanup –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
- Multi-select —Å Shift+click

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [02-FRONTEND.md](02-FRONTEND.md) ‚Äî JS –º–æ–¥—É–ª–∏
- [04-CLAUDE.md](04-CLAUDE.md) ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude
- [frontend/EMBEDDED-SCRIPTS.md](frontend/EMBEDDED-SCRIPTS.md) ‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ —è–∑—ã–∫–∏
