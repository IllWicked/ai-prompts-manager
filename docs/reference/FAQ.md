# FAQ — Часто задаваемые вопросы

[← Назад к INDEX](../INDEX.md)

> **Примечание:** Справочник для себя — типичные проблемы и их решения.

---

## Общие вопросы

### Приложение не запускается, что делать?

1. **Проверь WebView2 Runtime** — скачай и установи с [сайта Microsoft](https://developer.microsoft.com/en-us/microsoft-edge/webview2/)
2. **Отключи антивирус** — может блокировать запуск
3. **Запусти от администратора** — правый клик → "Запуск от имени администратора"

### Claude WebView показывает белый экран

1. Проверь интернет-соединение
2. Открой [claude.ai](https://claude.ai) в обычном браузере — работает?
3. Попробуй: Настройки → Сбросить всё

### Данные не сохраняются после перезапуска

**Возможные причины:**

1. **localStorage переполнен** (~5-10 MB лимит)
   - Открой DevTools (F12) → Application → Local Storage
   - Проверь использование: см. [LIMITATIONS.md](LIMITATIONS.md#localstorage-5-10-mb-лимит)
   
2. **Антивирус блокирует запись**
   - Добавь приложение в исключения

**Решение:** Экспортируй важные вкладки → Сбрось приложение → Импортируй обратно

---

## Claude интеграция

### Кнопка "Отправить в Claude" не работает

Claude.ai периодически обновляет разметку. Признаки:
- Сообщение не вставляется
- Кнопка отправки не нажимается
- Ошибки в консоли (F12 в Claude WebView)

**Решение:** Обновить селекторы — см. [04-CLAUDE.md](../04-CLAUDE.md#обновление-селекторов)

### Файлы не прикрепляются к сообщению

1. Проверь что файл существует и доступен
2. Проверь размер файла (рекомендуется < 10 MB)
3. Открой консоль Claude WebView (F12) и проверь ошибки
4. Попробуй прикрепить файл меньшего размера

### Мониторинг генерации не работает (кнопка не меняет цвет)

Селекторы `generation.stopButton` или `generation.streamingIndicator` устарели. См. [04-CLAUDE.md](../04-CLAUDE.md#обновление-селекторов)

### Как создать проект через приложение?

1. Добавь флаг **P** (New Project) на блок: ПКМ → Автоматизация → Новый проект
2. Отправь блок в Claude
3. Проект создастся автоматически и привяжется к текущей вкладке APM

### Что означает "Продолжить проект"?

Когда открываешь страницу существующего проекта Claude, появляется кнопка "Продолжить проект". Она привязывает этот проект к текущей вкладке APM для отслеживания.

### Claude показывает капчу или требует верификацию

**Причины:**
- Слишком много запросов за короткое время
- Подозрительная активность (автоматизация)
- Новый IP-адрес или VPN

**Решения:**
1. Пройди верификацию вручную в Claude WebView
2. Подожди несколько минут перед повторной попыткой
3. Если проблема повторяется — попробуй перезагрузить приложение
4. Убедись, что не используешь VPN или proxy

---

## Workflow редактор

### Блоки не перемещаются

1. Убедись, что включён **Edit Mode** (переключатель в настройках)
2. Проверь, не зажата ли клавиша (Space используется для pan)

### Связи не создаются

1. Начни drag с порта (точка на границе блока)
2. Тяни к порту другого блока
3. **Важно:** Циклические связи запрещены — A→B→A не сработает

### Как выделить несколько блоков?

- **Ctrl+Click** — добавить/убрать блок из выделения
- **Ctrl+A** — выделить все блоки
- **Click на пустом месте** — снять выделение

### Zoom не работает

- **Ctrl+Scroll** — zoom в Edit Mode
- В View Mode zoom автоматический (подстраивается под контент)

### Workflow не сохраняется

1. Проверь свободное место в localStorage
2. Экспортируй вкладку → Сбрось приложение → Импортируй

---

## Обновления

### Автообновление не работает

1. Проверь интернет
2. Убедись, что автообновление включено в настройках
3. Проверь endpoint в `tauri.conf.json` (должен указывать на твой GitHub)
4. Убедись, что релиз опубликован и содержит `latest.json`

### Обновление промптов не применяется

1. Проверь интернет
2. Кастомные вкладки (созданные тобой) не перезаписываются
3. Попробуй: Настройки → Проверить обновления промптов

### Как откатиться на предыдущую версию?

1. Скачай нужную версию с GitHub Releases
2. Удали текущую версию
3. Установи скачанную

---

## Разработка

### Как включить debug-логи?

```javascript
// dist/js/config.js
const DEBUG = true;
```

Логи будут в консоли Main WebView (F12).

### Где смотреть ошибки Claude WebView?

1. Открой панель Claude
2. Нажми F12 — откроется DevTools для Claude WebView
3. Перейди во вкладку Console

### CDP Timeout при создании проекта

→ Подробнее о таймаутах и решениях: [03-BACKEND.md#cdp-timeouts](../03-BACKEND.md#cdp-timeouts)

### Как обновить селекторы Claude?

Подробная инструкция: [TROUBLESHOOTING-SELECTORS.md](TROUBLESHOOTING-SELECTORS.md)

Краткий алгоритм:
1. Открой DevTools в Claude WebView (F12)
2. Найди элемент через Inspector
3. Обнови селектор в `src-tauri/scripts/selectors.json`
4. Перезапусти `cargo tauri dev`

---

## Связанные документы

- [LIMITATIONS.md](LIMITATIONS.md) — Известные ограничения
- [CONTRIBUTING.md](../guides/CONTRIBUTING.md) — Troubleshooting
- [04-CLAUDE.md](../04-CLAUDE.md) — Интеграция с Claude

---

## Дополнительные вопросы

### Почему только Windows?

WebView2 — Windows-only компонент от Microsoft. Для macOS потребовался бы WKWebView, для Linux — WebKitGTK. Каждая платформа требует отдельной реализации backend-логики, особенно для CDP.

### Можно ли изменить лимит 3 таба Claude?

Технически да — константа в `main.rs`. Но увеличение повысит потребление RAM (~200-500MB на каждый WebView) и усложнит UI. Рекомендуется использовать флаг N (New Chat) вместо новых табов.

### Как узнать, какой селектор сломался?

1. Открой DevTools в Claude WebView (F12)
2. В консоли проверь: `window.__SEL__` — покажет все селекторы
3. Попробуй: `document.querySelector('селектор')` — вернёт null если сломан
4. Используй Inspector (Ctrl+Shift+C) чтобы найти новый селектор

→ Подробнее: [TROUBLESHOOTING-SELECTORS.md](TROUBLESHOOTING-SELECTORS.md)

### Почему данные хранятся в localStorage, а не в файле?

Архитектурное решение ([ADR-002](ADR.md#adr-002-localstorage-вместо-indexeddb)):
- Синхронный API — проще код
- JSON.parse/stringify — без лишних зависимостей
- ~1-2MB данных — localStorage достаточно

При необходимости — экспорт в JSON-файл всегда доступен.

### Как добавить поддержку нового языка?

1. Открой `dist/js/languages.js`
2. Добавь объект языка в `LANGUAGES`:
```javascript
xx: {
    lang: 'xxxский',        // прилагательное языка (им.п. м.р.)
    native: 'xxxоязычный',  // "носитель языка" (им.п. м.р.)
    country: 'Страна',      // название страны
    privacyPolicy: '...',   // перевод "Privacy Policy"
    aboutUs: '...',
    legalInfo: '...',
    cookiePolicy: '...'
}
```
3. Система автоматически сгенерирует все 24 падежных формы для `lang` и `native`
4. Язык появится в селекторе

---

## Типичные ошибки в консоли

### `QuotaExceededError: Failed to execute 'setItem' on 'Storage'`

**Причина:** localStorage переполнен (~5-10 MB лимит).

**Решение:**
1. Экспортируй важные вкладки
2. Удали неиспользуемые вкладки
3. Сбрось приложение → Импортируй обратно

→ Подробнее: [LIMITATIONS.md#localstorage-5-10-mb-лимит](LIMITATIONS.md#localstorage-5-10-mb-лимит)

### `Element not found for selector: generation.stopButton`

**Причина:** Claude.ai обновил разметку, селектор устарел.

**Решение:** Обновить селектор в `src-tauri/scripts/selectors.json`

→ Подробнее: [TROUBLESHOOTING-SELECTORS.md](TROUBLESHOOTING-SELECTORS.md)

### `CDP timeout after X seconds`

→ См. [03-BACKEND.md#cdp-timeouts](../03-BACKEND.md#cdp-timeouts)

### `WebView2 not found` / Приложение не запускается

**Причина:** WebView2 Runtime не установлен.

**Решение:** Скачай и установи [WebView2 Runtime](https://developer.microsoft.com/en-us/microsoft-edge/webview2/)

### `invoke is not a function` / `__TAURI__ is undefined`

**Причина:** Код выполняется до загрузки Tauri API.

**Решение:** Оберни код в `window.__TAURI__` проверку или используй `DOMContentLoaded`.

### `Failed to fetch` при проверке обновлений

**Причина:** Нет интернета или GitHub недоступен.

**Решение:**
1. Проверь интернет-соединение
2. Попробуй открыть GitHub вручную
3. Отключи VPN/proxy
